// Short button variant
//
// This button is slightly shorter than the usual one,
// so that when it sits to the right of a text input
// (eg a search box) it is the same height.
.app-button--small {
  @include nhsuk-typography-responsive(16);
  padding: nhsuk-spacing(1) 12px;

  &.app-button--secondary,
  &.app-button--secondary-warning {
    // Adjust padding to account for removal of 2px bottom border
    padding-bottom: #{nhsuk-spacing(1) + 1px};
    padding-top: #{nhsuk-spacing(1) + 1px};

    &:active {
      margin-bottom: -1px;
      // Revert padding to account for reintroduction of 2px bottom border
      padding-bottom: nhsuk-spacing(1);
      padding-top: nhsuk-spacing(1);
    }
  }
}


.app-button--loading {
  position: relative;
  -webkit-transition: width 5s ease;
  transition: width 5s ease
}

.app-button--loading:before {
    position: relative;
    display: inline-block;
    margin-right: 10px;
    margin-bottom: -9px;
    height: 25px;
    width: 25px;
    background: transparent url('data:image/svg+xml,<svg height="200" viewBox="0 0 200 200" width="200" xmlns="http://www.w3.org/2000/svg">%0A  <g fill="none" fill-rule="evenodd">%0A    <path%0A        d="m100 0v13.0000106c-.0149985-.0000068-.0299979-.0000106-.0449982-.0000106-48.0239214 0-86.9550018 38.9310804-86.9550018 86.9550018 0 48.0239212 38.9310804 86.9550022 86.9550018 86.9550022 48.0089212 0 86.9306812-38.906764 86.9549902-86.910004h13.090008c0 55.228475-44.771525 100-100 100s-100-44.771525-100-100 44.771525-100 100-100z"%0A        fill="%23e5e5e5"/>%0A    <path%0A        d="m0 100h13.0000106zm100 86.909993v13.090007zm100-86.909993h-13.090007c.000007-.0149985.000011-.0299979.000011-.0449982 0-48.0089211-38.906764-86.9306807-86.910004-86.9549904v-13.0000114c55.228475 0 100 44.771525 100 100z"%0A        fill="%23367c42"/>%0A  </g>%0A</svg>') no-repeat;
    background-size: 25px 25px;
    -webkit-animation-name: spin;
    animation-name: spin;
    -webkit-animation-duration: .75s;
    animation-duration: .75s;
    -webkit-animation-iteration-count: infinite;
    animation-iteration-count: infinite;
    -webkit-transform-origin: 50% 50%;
    -ms-transform-origin: 50% 50%;
    transform-origin: 50% 50%;
    animation-timing-function: ease;

}

@keyframes spin {
    0% {
        -webkit-transform: rotate(0deg);
        transform:rotate(0)
    }

    to {
        -webkit-transform: rotate(1turn);
        transform:rotate(1turn)
    }
}

.app-button--loading[disabled],
.app-button--loading[disabled]:hover {
    background-color: #44834d;
    opacity: 1;
    -webkit-box-shadow: 0 2px 0 #88988c;
    box-shadow:0 2px #88988c
}


.app-body--error {
  font-weight: bold;
  color: $nhsuk-error-color;
}


// Proposed secondary button style
// See https://github.com/nhsuk/nhsapp-frontend/issues/12
// See https://github.com/nhsuk/nhs-app-design-styles-components-patterns
@mixin app-button-secondary($button-color) {
  background-color: transparent;
  border-bottom: 0;
  border-color: $button-color;
  box-shadow: 0 4px 0 $button-color;
  color: $button-color;
  // Adjust padding to account for removal of 2px bottom border
  padding-bottom: 13px;
  padding-top: 13px;

  &:link,
  &:visited {
    color: $button-color;
  }

  &:hover {
    background-color: rgba($button-color, 10%);
    color: $button-color;
  }

  &:focus {
    background-color: $nhsuk-focus-color;
    border-color: $nhsuk-focus-color;
    color: $nhsuk-focus-text-color;
  }

  &:focus:visited:active {
    // Override .nhsuk-button turning colour white
    color: $button-color;
  }

  &:active {
    background-color: rgba($button-color, 15%);
    border-bottom: $nhsuk-border-width-form-element solid; // Reintroduce 2px bottom border
    border-color: $button-color;
    color: $button-color;
    // Revert padding to account for reintroduction of 2px bottom border
    padding-bottom: 12px;
    padding-top: 12px;
  }

  &::before {
    bottom: #{$button-shadow-size * -1};
    top: #{$nhsuk-border-width-form-element * -1};
  }

  &:active::before {
    bottom: #{($nhsuk-border-width-form-element + $button-shadow-size) * -1};
    top: #{($nhsuk-border-width-form-element + $button-shadow-size) * -1};
  }
}

.app-button--secondary {
  @include app-button-secondary($nhsuk-link-color);
}

.app-button--secondary-warning {
  @include app-button-secondary($nhsuk-warning-button-color);
}

.app-button--small {
  @include nhsuk-typography-responsive(16);
  $padding-block: 6px;
  $padding-block-icon: 3px;
  $padding-inline: 12px;
  $padding-inline-icon: 6px;

  padding: $padding-block $padding-inline;

  &.app-button--secondary,
  &.app-button--secondary-warning {
    // Adjust padding to account for removal of 2px bottom border
    padding: #{$padding-block + 1px} $padding-inline;

    &.app-button--icon {
      padding: #{$padding-block-icon + 1px} $padding-inline-icon;
    }

    &:active {
      margin-bottom: -1px;
      // Revert padding to account for reintroduction of 2px bottom border
      padding: $padding-block $padding-inline;
    }

    &.app-button--icon:active {
      // Revert padding to account for reintroduction of 2px bottom border
      padding: $padding-block-icon $padding-inline-icon;
    }
  }
}

.app-button--icon {
  .nhsuk-icon {
    display: block;
    height: 28px;
    width: 28px;
  }
}

.app-button-group {
  @include nhsuk-responsive-margin(6, "bottom");

  align-items: center;
  display: flex;
  flex-direction: column;
  flex-wrap: wrap;
  gap: nhsuk-spacing(3) nhsuk-spacing(4);

  .nhsuk-link {
    @include nhsuk-font($size: 19, $line-height: 19px);
    display: inline-block;
    margin-bottom: nhsuk-spacing(2);
    margin-top: nhsuk-spacing(2);
    max-width: 100%;
    text-align: center;
  }

  .nhsuk-button {
    margin-bottom: 0;
    width: 100%;
  }

  @include mq($from: tablet) {
    flex-direction: row;
    flex-wrap: wrap;

    .nhsuk-button {
      width: auto;
    }

    .nhsuk-link {
      text-align: left;
    }
  }
}
