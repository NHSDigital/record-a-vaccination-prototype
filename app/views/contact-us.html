{% extends 'layout.html' %}

{% set pageName = "Help and support" %}


{% block content %}
  <div class="nhsuk-grid-row">
    <div class="nhsuk-grid-column-two-thirds">

      <h1 class="nhsuk-heading-l">{{ pageName }}</h1>

      <p>Before contacting us, check our guidance on:</p>

      <ul>
        <li><a href="https://guide.ravs.england.nhs.uk/record-vaccinations/">Recording a vaccination</a></li>
        <li><a href="https://guide.ravs.england.nhs.uk/managing-vaccines/">Managing vaccine batches</a></li>
        <li><a href="https://guide.ravs.england.nhs.uk/managing-users/">Managing users</a></li>
        <li><a href="https://guide.ravs.england.nhs.uk/records/">Editing and deleting records</a></li>
        <li><a href="https://guide.ravs.england.nhs.uk/reporting/">Reports</a></li>
      </ul>

      <h2 class="nhsuk-heading-m">Contact us</h2>


      {% if not currentUser %}
        {{ input({
          label: {
            text: "Name",
            classes: "nhsuk-label--s"
          }
        }) }}

        {{ input({
          label: {
            text: "Email",
            classes: "nhsuk-label--s"
          }
        }) }}

        {% set options = [] %}
        {% set items = [{ text: "", value: ""}] %}

        {% for organisation in data.allOrganisations | sort(false, false, "name") %}
          {% if organisation.type == "Community pharmacy" %}
            {% set items = (items.push({
              text: organisation.name + ", " + organisation.address + ", " + (organisation.address.postcode | upper) + " (" + organisation.id + ")",
              value: organisation.id,
              selected: (organisation.id === data.organisationId)
            }), items) %}
          {% endif %}
        {% endfor %}

        {{ select({
          id: "organisation-id",
          name: "organisationId",
          label: {
            text: "Organisation (optional)",
            size: "s"
          },
          hint: {
            text: "Search by name or ODS code"
          },
          items: items,
          errorMessage: {
            text: (errors | first).text
          } if (errors | length)
        }) }}

      {% endif %}

      {% set options = [
        "Logging in",
        "Recording a vaccination",
        "Managing users",
        "Managing vaccines and batches",
        "Editing or deleting records",
        "Reports",
        "Payments",
        "Something else"
      ] %}

      {% set items = [] %}

      {% for option in options %}
        {% set items = (items.push({text: option, value: option}), items) %}
      {% endfor %}

      {{ radios({
        name: "supportTopic",
        fieldset: {
          legend: {
            text: "What do you need help with?",
            classes: "nhsuk-fieldset__legend--s"
          }
        },
        items: items
      }) }}

      {{ characterCount({
        name: "supportQuery",
        label: {
          text: "Details",
          classes: "nhsuk-label--s"
        },
        hint: {
          text: "Tell us more about the issue"
        },
        maxlength: 500,
        rows: 10
      }) }}


      <label class="nhsuk-label nhsuk-label--s">Attachment (optional)</label>
      <div class="nhsuk-hint nhsuk-u-margin-bottom-3">For example, a screenshot</div>

      <div style="background-color: #f0f4f5; border: 2px solid #768692; border-style: dashed; padding: 26px 26px 0 26px; margin-bottom: 40px;">
        <p class="nhsuk-body" style="background-color: rgba(216,221,224,.5); color: #212b32; margin-bottom: 16px; padding: 16px;">No file chosen</p>
        <div class="nhsuk-button-group">
          {{ button({
            text: "Choose file",
            classes: "nhsuk-button--secondary"
          }) }}
          <p>or drop file</p>
        </div>
      </div>


      {{ button({
        text: "Send message",
        href: "/contact-us-confirmation"
      }) }}

    </div>
  </div>


{% endblock %}
