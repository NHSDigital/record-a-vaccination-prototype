<table class="nhsuk-table">
  <caption class="nhsuk-table__caption nhsuk-table__caption--m">Past 7 days</caption>
  <thead role="rowgroup" class="nhsuk-table__head">
    <tr role="row">
      <th role="columnheader" class="" scope="col">
        Date
      </th>
      <th role="columnheader" class="nhsuk-table__header--numeric" scope="col">
        Total
      </th>
    </tr>
  </thead>
  <tbody class="nhsuk-table__body">

    {% set firstStat = (stats | first ) %}

    {% for date in firstStat.days %}
      {% if not loop.index0 == 0 %}
        {% set total = 0 %}
        <tr role="row" class="nhsuk-table__row">
          <th class="nhsuk-table__header  nhsuk-u-font-weight-normal" scope="row">
            {% if loop.index0 == 1 %}
              Today
            {% else %}
              {{ date.date | dayName }} {{ date.date | govukDate(truncate=true) }}

              {% if loop.index0 == 2 %}(yesterday){% endif %}
            {% endif %}
          </th>

          {% set dayIndex = loop.index0 %}
          {% for vaccineStat in stats %}
            {% set total = total + vaccineStat.days[dayIndex].count %}
            <!-- <td class="nhsuk-table__cell nhsuk-table__cell--numeric">{{ vaccineStat.days[dayIndex].count }}</td> -->
          {% endfor %}
          <td class="nhsuk-table__cell nhsuk-table__cell--numeric">{{ total }}</td>
        </tr>
      {% endif %}
    {% endfor %}

  </tbody>
</table>
