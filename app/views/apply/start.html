{% extends 'layout.html' %}

{% set pageName = "Sign up for your pharmacy" %}

{% block header %}
  {% include "includes/header-logged-out.html" %}
{% endblock %}

{% block beforeContent %}
  {{ backLink({
    href: "/product-page",
    text: "Back"
  }) }}
{% endblock %}

  {% block content %}
  <div class="nhsuk-grid-row">
    <div class="nhsuk-grid-column-two-thirds">

      <h1 class="nhsuk-heading-l">{{ pageName }}</h1>

      <p>You can sign up if you are a community pharmacy offering NHS vaccinations.</p>

      <p>If you need to sign up for more than 1 pharmacy, you can use this form multiple times or <a href="/contact">contact us</a>.</li>
      </p>

      <form action="/apply/check-pharmacy" method="post">


      <div class="nhsuk-form-group">
          <h2 class="nhsuk-label-wrapper">
            <label class="nhsuk-label nhsuk-label--m nhsuk-u-margin-bottom-1" for="organisationCode">
             Find your pharmacy
            </label>
          </h2>
          <div class="nhsuk-hint" id="organisationName-hint">
            Search by name or ODS code
          </div>
          <select class="nhsuk-select" id="organisationCode" name="organisationCode"
            data-module="autocomplete" data-autoselect="" data-display-menu="" data-min-length="" data-show-all-values="" data-show-no-options-found="">
            <option selected value=""></option>

            {% set options = [] %}

            {% for organisation in data.organisations %}
              {% if organisation.type == "Community Pharmacy" %}
                {% set options = (options.push({
                  label: organisation.name + ", " + organisation.address.line1 + ", " + (organisation.address.postcode | upper) + " (" + organisation.id + ")",
                  value: organisation.id
                }), options) %}
              {% endif %}
            {% endfor %}

            {% for option in (options | sort(false, true, "label")) %}
              <option value="{{ option.value }}">{{ option.label }}</option>
            {% endfor %}
          </select>
        </div>

        {{ button({
          "text": "Continue"
        }) }}
      </form>


    </div>
  </div>
{% endblock %}








