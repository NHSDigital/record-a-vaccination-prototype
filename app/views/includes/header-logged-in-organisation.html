{% set organisationSetting = currentUser.organisations | findById(data.currentOrganisationId) %}

{{ header({
    "service": {
        "text": "Record a vaccination",
        "href": "/"
      },
      "showNav": "true",
      "showSearch": "false",
      account: {
        items: [
          {
            href: "/user-profile",
            text: currentUser.email,
            icon: true
          },
          {
            href: '/sign-out',
            text: 'Log out'
          } if data.currentUserId
        ]
      },
      "navigation": {
        items: [
        {
          href  : "/home/",
          text : "Home",
          active: (currentSection == "home")
        },
        {
          href  : "/appointments/index2",
          html: "<span class=\"app-header__navigation-link-label\">Appointments</span> <span class=\"nhsuk-tag app-tag--header nhsuk-u-margin-left-2\">New</span>",
          classes: "app-header__navigation--no-underline",
          active: (currentSection == "appointments")
        },
        {
          href  : "/record-vaccinations",
          text : ("Record vaccinations") | safe,
          active: (currentSection == "vaccinate")
        },
        {
          href: "/vaccines",
          text: "Vaccines",
          active: (currentSection == "vaccines")
        } if (currentUser and (["Lead administrator", "Administrator"] | arrayOrStringIncludes(organisationSetting.permissionLevel))),
        {
          href: "/records",
          text: "Records",
          active: (currentSection == "records")
        } if (currentUser and (["Lead administrator", "Administrator"] | arrayOrStringIncludes(organisationSetting.permissionLevel))),

        {
          href: "/reports",
          text: "Reports",
          active: (currentSection == "reports")
        } if (currentUser and (["Lead administrator", "Administrator"] | arrayOrStringIncludes(organisationSetting.permissionLevel))),
        {
          href: '/user-admin',
          text: 'Manage users',
          active: (currentSection == "manage-users")
        } if (currentUser and organisationSetting.permissionLevel === "Lead administrator")
      ]
      }
    })
  }}
