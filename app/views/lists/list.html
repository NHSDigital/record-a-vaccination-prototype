{% extends 'layout.html' %}

{% set pageName = patientList.name %}
{% set site = currentOrganisation.sites | findById(patientList.siteId) %}

{% set currentSection = "lists" %}

{% block beforeContent %}
  {{ backLink({
    href: "/lists/site/" + patientList.siteId
  }) }}
 {% endblock %}
{% block content %}

  <div class="nhsuk-grid-row">
    <div class="nhsuk-grid-column-two-thirds">

      <div class="nhsuk-caption-l">{{ site.name }}</div>

        <h1 class="nhsuk-heading-l">{{ pageName }}</h1>

        <p>To record a vaccination, search for the person in the list and select the Record link next to their details.</p>


        <p>
          <a href="/lists/list/{{ patientList.id }}/add">Add more NHS numbers</a>    &nbsp; &nbsp; &nbsp;
          <a href="/lists/list/{{ patientList.id }}/edit-name">Edit list name</a>  &nbsp; &nbsp; &nbsp;
          <a href="/lists/list/{{ patientList.id }}/delete">Delete list</a>
        </p>

        <div class="nhsuk-u-margin-top-5">
          <form action="/lists/list/{{ patientList.id }}" method="get" novalidate>
            <div class="nhsuk-form-group nhsuk-u-margin-bottom-0">
              <label class="nhsuk-label" for="q">
                Search for name or NHS number
              </label>
              <input class="nhsuk-input nhsuk-input--width-20" id="q" name="q" type="search" value="{{ data.q }}">

              {{ button({
                text: "Search",
                classes: "nhsuk-button--secondary nhsuk-u-margin-left-2 app-button--small nhsuk-u-margin-bottom-0"
              })}}
            </div>
          </form>
        </div>

<br>

    </div>
  </div>
  <div class="nhsuk-grid-row">
    <div class="nhsuk-grid-column-full">

      <table class="nhsuk-table">
        <caption class="nhsuk-table__caption">Showing {{ patientList.patients | length }} of {{ patientList.patients | length }} patients</caption>
        <thead class="nhsuk-table__head" role="rowgroup">
            <thead role="rowgroup" class="nhsuk-table__head">
                <tr role="row">


                  <th role="columnheader" class="" scope="col">
                    Name
                  </th>
                  <th role="columnheader" class="" scope="col">
                    NHS number
                  </th>
                  <th role="columnheader" class="" scope="col">
                    Date of birth
                  </th>

                  <th role="columnheader" class="" scope="col">

                  </th>

                  <th role="columnheader" class="" scope="col">

                  </th>

                </tr>
        </thead>

        <tbody class="nhsuk-table__body">

          {% for patient in patientList.patients %}
            <tr class="nhsuk-table__row">
              <td class="nhsuk-table__cell">
                {{ patient.firstName }}
                {{ patient.lastName }}
              </td>
              <td class="nhsuk-table__cell">
                {{ patient.nhsNumber }}
              </td>
              <td class="nhsuk-table__cell">
                {{ patient.dateOfBirth | govukDate }}
              </td>
              <td class="nhsuk-table__cell">
                <a class="nhsuk-link" href="/record-vaccinations/patient-history?patientName={{ patient.firstName}} {{ patient.lastName }}&nhsNumber={{ patient.nhsNumber }}&dateOfBirth={{ patient.dateOfBirth }}?fromListId={{ patientList.id }}">Record</a>
              </td>
              <td class="nhsuk-table__cell nhsuk-table__cell--numeric">
                <a class="nhsuk-link" href="/lists/remove">Remove
              </td>
            </tr>
          {% endfor %}

          <tr role="row" class="nhsuk-table__row">
            <td class="nhsuk-table__cell">
              NHS number not found
            </td>
            <td class="nhsuk-table__cell">
              9523654781
            </td>
            <td class="nhsuk-table__cell"></td>
            <td class="nhsuk-table__cell"></td>
            <td class="nhsuk-table__cell nhsuk-table__cell--numeric">
            <a class="nhsuk-link" href="/lists/remove">Remove</a>
            </td>
          </tr>
          </tbody>
        </table>


        {{ appPagination({
          nextUrl: "#",
          items: [
            {
              number: 1,
              href: "#",
              current: true
            },
            {
              number: 2,
              href: "#"
            },
            {
              number: 3,
              href: "#"
            }
          ]
        }) }}

    </div>
  </div>

{% endblock %}



